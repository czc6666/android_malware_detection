import subprocess

def run_script(env_name, script_path):
    """
    在新的命令行窗口中，指定的conda环境中运行脚本
    :param env_name: conda环境名称
    :param script_path: 要运行的脚本的绝对路径
    """
    # 使用 cmd.exe 在新的命令行窗口中运行命令
    command = f'cmd.exe /C start cmd.exe /K "wsl conda run -n {env_name} python {script_path}"'
    subprocess.Popen(command, shell=True)

if __name__ == '__main__':
    base_path = '/home/czc/code/Android_Malware_Detection/code/android_malware_detection'
    
    # 运行在 Python 2.7 环境中的脚本
    run_script('py27', f'{base_path}/1.main_literadar_python27.py')

    # 运行在 Python 3.8 环境中的脚本
    scripts_py38 = [
        '2.main_preprocess_python3.py',
        '3.main_lsi_train_python3.py',
        '4.main_cscg_construct_python3.py',
        '5.main_graph_test_python3.py'
    ]
    for script in scripts_py38:
        run_script('py38', f'{base_path}/{script}')